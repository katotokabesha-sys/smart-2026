# Cr√©er le r√©pertoire temporaire
base_dir = "lbk-smart-2026"

# Cr√©er le ZIP
zip_filename = f"{base_dir}.zip"

with zipfile.ZipFile(zip_filename, 'w', zipfile.ZIP_DEFLATED) as zipf:
    for file_path, content in structure.items():
        # Cr√©er les r√©pertoires parents si n√©cessaire
        dir_path = os.path.dirname(file_path)
        if dir_path and dir_path not in zipf.namelist():
            # Ajouter les r√©pertoires
            parts = dir_path.split('/')
            for i in range(1, len(parts) + 1):
                subdir = '/'.join(parts[:i]) + '/'
                if subdir not in zipf.namelist():
                    zipf.writestr(subdir, '')
        
        # √âcrire le fichier
        if isinstance(content, dict):
            # JSON
            zipf.writestr(file_path, json.dumps(content, indent=2, ensure_ascii=False))
        else:
            # Texte
            zipf.writestr(file_path, str(content))

print(f"‚úÖ Fichier ZIP cr√©√©: {zip_filename}")
print(f"üì¶ Taille: {os.path.getsize(zip_filename) / 1024 / 1024:.2f} MB")

return zip_filename
